# Открываем файл '5.txt' для чтения с указанием кодировки UTF-8
f = open("5.txt", encoding="utf-8")

# Читаем первую строку - количество записей о покупках пиццы
N = int(f.readline().strip())

# Создаём пустые списки для хранения данных
dates = []  # Даты покупок
names = []  # Названия пицц
costs = []  # Стоимости покупок

# Читаем и обрабатываем N строк с данными о покупках
for i in range(N):
    line = f.readline().strip()
    if not line:  # Пропускаем пустые строки
        continue

    # Разбиваем строку на три части: дата, название пиццы, стоимость
    date, name, cost = line.split()

    # Добавляем данные в соответствующие списки
    dates.append(date)
    names.append(name)
    costs.append(int(cost))  # Преобразуем стоимость в целое число

# Закрываем файл после чтения
f.close()

# Создаём словарь для подсчёта количества покупок каждого вида пиццы
count_list = {}

# Проходим по всем покупкам и считаем, сколько раз покупалась каждая пицца
for i in range(N):
    if count_list.get(names[i]) == None:
        # Если такой пиццы ещё нет в словаре, добавляем с количеством 1
        count_list.update({names[i]: 1})
    else:
        # Если пицца уже есть, увеличиваем счётчик на 1
        new_val = count_list.get(names[i]) + 1
        count_list.update({names[i]: new_val})

# Сортируем словарь по количеству покупок в убывающем порядке
# item[1] - это количество покупок (value), сортируем по нему
sorted_count_list = sorted(count_list.items(), key=lambda item: item[1], reverse=True)

# Создаём словарь для суммирования стоимости покупок по дням
sum_for_dates = {}

# Проходим по всем покупкам и суммируем стоимость по датам
for i in range(N):
    if sum_for_dates.get(dates[i]) == None:
        # Если такой даты ещё нет в словаре, добавляем с текущей стоимостью
        sum_for_dates.update({dates[i]: costs[i]})
    else:
        # Если дата уже есть, добавляем текущую стоимость к существующей
        new_val = sum_for_dates.get(dates[i]) + costs[i]
        sum_for_dates.update({dates[i]: new_val})

# Сортируем даты в хронологическом порядке (по возрастанию)
sorted_dates = sorted(sum_for_dates.items())

# Находим самый дорогой заказ
max_cost = 0  # Максимальная стоимость
max_index = 0  # Индекс самого дорогого заказа

# Проходим по всем заказам и ищем максимальную стоимость
for i in range(N):
    if costs[i] > max_cost:
        max_cost = costs[i]  # Обновляем максимальную стоимость
        max_index = i  # Запоминаем индекс этого заказа

# Выводим пустую строку для разделения вывода
print()

# Выводим статистику по количеству купленных пицц
print("Счетчик купленных пицц:")
for name, count in sorted_count_list:
    print(f"{count} - {name}.")

# Выводим пустую строку для разделения вывода
print()

# Выводим суммарную стоимость покупок по дням
print("Суммарная стоимость по дням:")
for date, total in sorted_dates:
    print(f"{date}: {total} руб.")

# Выводим пустую строку для разделения вывода
print()

# Выводим информацию о самом дорогом заказе
print("Самый дорогой заказ:")
print(dates[max_index] + " " + names[max_index] + " " + str(costs[max_index]))

# Выводим пустую строку для разделения вывода
print()

# Выводим среднюю стоимость по всем заказам
print("Средняя стоимость по всем заказам:")
# Форматируем вывод с двумя знаками после запятой
print("{:.2f}".format(sum(costs) / N))